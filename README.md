# Prerequisite

1. Make sure you have the following installed outside the current project directory and available in your `GOPATH`
    - [Golang](https://go.dev/) Is an open source programming language supported by Google v1.19 go version recommended
    - [air](https://github.com/cosmtrek/air) For hot reloading (optional)

2. Technologies used in this repository
    - [Fiber](https://docs.gofiber.io/) for web framework
	- [Gorm](https://gorm.io/) ORM library
	- [JWT-Go](https://github.com/dgrijalva/jwt-go) for authentication token
	- [Validator](https://github.com/go-playground/validator) for password validation
	- [Testify](https://github.com/stretchr/testify) for unit tests
	- [Crypto](https://cs.opensource.google/go/x/crypto) for data encryption and verification
	- [SqlLite](https://pkg.go.dev/gorm.io/driver/sqlite@v1.4.3) database driver used for the example

# Installation

1. Clone this repo
2. if you are testing the template go to [Step 7](#step_7)
3. If it is a repo created from bigbang with this template you must delete the `go.mod` file

4. In the console inside the repository run the following command
```shell
    go mod init github.com/bancodebogota/[repository_name_generated_by_BigBang]

    example -> go mod init github.com/bancodebogota/bbog-dig-pl-go-mngr-template
```
This is because each module or package that is created in Go must be unique.

5. Update all imports with the repository name generated by bigbang
examplee ->
~~~
	"github.com/bancodebogota/[repository_name_generated_by_BigBang]/src/app/dal"
	"github.com/bancodebogota/[repository_name_generated_by_BigBang]/src/app/models"
	"github.com/bancodebogota/[repository_name_generated_by_BigBang]/src/app/types"
	"github.com/bancodebogota/[repository_name_generated_by_BigBang]/src/utils"
	"github.com/bancodebogota/[repository_name_generated_by_BigBang]/src/utils/jwt"
	"github.com/bancodebogota/[repository_name_generated_by_BigBang]/src/utils/password"
~~~

6. A `go.mod` file will be created in which we add the necessary packages without deleting anything

~~~
require (
	github.com/dgrijalva/jwt-go v3.2.0+incompatible
	github.com/go-playground/validator/v10 v10.11.1
	github.com/gofiber/fiber/v2 v2.39.0
	github.com/stretchr/testify v1.7.0
	golang.org/x/crypto v0.0.0-20220214200702-86341886e292
	gorm.io/driver/sqlite v1.4.3
	gorm.io/gorm v1.24.1
)
~~~

<h4 id="step_6">Step 6</h4>

7. Download the libraries and packages
```
    go mod tidy
```

# Run the app

Run the application with
```
    go run .
```

## Installing Air (optional)

First, we are going to install air. There are a number of ways to install air, but the way I did it was using go install as I had Golang already installed:
```
go install github.com/cosmtrek/air@latest
```
There are a number of other installation options that you can find here.

Configuring Air
Next, we need to configure Air for our Golang project. You can do that by running the following command:
```
air init
```
This will create a air.toml file that will contain the default configurations for Air. Here is an example of what that looks like:

~~~
root = "."
testdata_dir = "testdata"
tmp_dir = "tmp"

[build]
  bin = "./tmp/main"
  cmd = "go build -o ./tmp/main ."
  delay = 1000
  exclude_dir = ["assets", "tmp", "vendor", "testdata"]
  exclude_file = []
  exclude_regex = ["_test.go"]
  exclude_unchanged = false
  follow_symlink = false
  full_bin = ""
  include_dir = []
  include_ext = ["go", "tpl", "tmpl", "html"]
  kill_delay = "0s"
  log = "build-errors.log"
  send_interrupt = false
  stop_on_error = true

[color]
  app = ""
  build = "yellow"
  main = "magenta"
  runner = "green"
  watcher = "cyan"

[log]
  time = false

[misc]
  clean_on_exit = false

[screen]
  clear_on_rebuild = false
~~~

Running your App
Finally, the only part that is remaining is running our Golang application using Air. You can do this by running the air command:

```
air
```
After that, make changes to your project and watch air live-reload your Go application.


# Test the App

To run the main tests
```
go test -v
```

to run the tests by package you enter their respective folder
```
go test ./src/utils -v
```

# Test the endpoints

with the vscode [REST Cliente](https://marketplace.visualstudio.com/items?itemName=humao.rest-client) extension try to send the requests that are in the `./request/request.http` file in the order demarcated to be successful or if you want to test errors you can do it by modifying variables or executing the requests in a different order
